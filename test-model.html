<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Model Loading Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .log { background: #f0f0f0; padding: 10px; margin: 10px 0; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Model Loading Test</h1>
    <div id="log"></div>
    
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.153.0/examples/jsm/"
            }
        }
    </script>
    
    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        
        const log = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            log.appendChild(div);
            console.log(message);
        }
        
        // Test 1: Check if model file exists via fetch
        addLog('Testing model file accessibility...');
        fetch('low_poly_mccree-transformed.glb')
            .then(response => {
                addLog(`Model fetch response: ${response.status} ${response.statusText}`, 
                       response.ok ? 'success' : 'error');
                addLog(`Content-Type: ${response.headers.get('content-type')}`);
                addLog(`Content-Length: ${response.headers.get('content-length')}`);
                return response.ok;
            })
            .then(ok => {
                if (ok) {
                    // Test 2: Try loading with GLTFLoader
                    addLog('Testing GLTFLoader...');
                    const loader = new GLTFLoader();
                    
                    loader.load(
                        'low_poly_mccree-transformed.glb',
                        function(gltf) {
                            addLog('✓ Model loaded successfully!', 'success');
                            addLog(`Scene children: ${gltf.scene.children.length}`);
                            addLog(`Animations: ${gltf.animations.length}`);
                        },
                        function(progress) {
                            addLog(`Loading progress: ${(progress.loaded / progress.total * 100).toFixed(1)}%`);
                        },
                        function(error) {
                            addLog(`✗ GLTFLoader error: ${error.message}`, 'error');
                            console.error('Full error:', error);
                        }
                    );
                } else {
                    addLog('✗ Cannot fetch model file', 'error');
                }
            })
            .catch(error => {
                addLog(`✗ Fetch error: ${error.message}`, 'error');
                console.error('Full error:', error);
            });
        
        // Test 3: Check if Three.js is working
        addLog('Testing Three.js initialization...');
        try {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            addLog('✓ Three.js initialized successfully', 'success');
        } catch (error) {
            addLog(`✗ Three.js error: ${error.message}`, 'error');
        }
    </script>
</body>
</html> 